# UIProbe

Unity UI 界面探针工具，提供预制体索引、界面快照记录、重名检测等功能。

## ✨ 最新更新 (v1.6)

### 1. 批量检测工作流优化
- **进度跟踪**：支持处理状态标记，已处理卡片显示绿色背景✅
- **智能完成**：打开预制体自动检测，无重名自动标记完成
- **返回功能**：单个检测显示"返回批量结果"按钮
- **进度显示**：工具栏显示处理进度（已处理 X/Y）
- **状态持久化**：处理状态保存到JSON，跨会话保持

### 2. 界面体验优化  
- **子标签系统**：重名检测页面分为「检测功能」和「历史记录」
- **自动刷新**：重命名后自动重新检测，实时更新
- **搜索历史管理**：历史记录新增✕删除按钮
- **CSV自动保存**：批量检测CSV自动保存到配置目录

---

## ✨ v1.5 功能

### 1. 索引持久化
- **自动保存索引**：刷新索引后自动保存到磁盘，无需每次重新扫描。
- **自动加载索引**：打开窗口时自动加载上次的索引，启动更快速。
- **智能检测**：自动检测索引根路径变化，提示刷新。
- **显示更新时间**：界面显示索引的上次更新时间。
- **存储位置**：`<主文件夹>/IndexCache.json`（默认在AppData）

### 2. 界面优化
- **搜索清除按钮**：搜索框输入后显示 ✕ 按钮，一键清空并恢复索引状态。
- **CSV格式改进**：批量检测导出增加"是否存在重复命名"列（是/否），便于快速筛选。

---

## ✨ 核心功能 (v1.4)

### 1. 增强型重名检测
- **灵活的检测范围**：支持全局检测和同级（兄弟节点）检测。
- **智能过滤规则**：
  - **白名单**：允许特定的节点名重复（如 `Viewport`, `Content`）。
  - **黑名单**：强制禁止特定的节点名重复。
  - **前缀过滤**：只检测特定前缀的节点（如 `c_`, `m_`）。
  - **UGUI 组件检测**：检测同类型的组件节点是否重名。
- **可视化设置**：在 Settings 标签页中集中管理所有规则。

### 2. 批量检测与导出
- **预制体索引集成**：在 "预制体索引" 标签页中直接进行批量操作。
- **统一检测规则**：批量检测自动使用 Settings 中配置的公用检测规则，确保检测标准一致。
- **批量检测**：一键检测选中的多个预制体，支持进度显示和取消操作。
- **CSV 导出**：自动生成检测报告，包含：
  - 所属文件夹
  - 预制体名称
  - 是否存在重复命名（是/否）
  - 重名节点详情（节点名及重复次数）

### 3. 重命名历史与回滚
- **历史记录**：自动记录每一次重命名操作。
- **一键回滚**：支持撤销重命名操作，恢复到之前的状态。
- **可视化界面**：在重名检测面板底部查看操作历史。

### 4. 数据管理优化
- **统一存储**：支持自定义数据存储路径。
- **CSV 归档**：检测报告自动保存到 `CSV_Exports` 目录。
- **历史归档**：重命名历史自动保存到 `Rename_History` 目录。
- **索引缓存**：预制体索引自动保存，启动即用。

## 📦 安装与使用

1. 将 `UIProbe` 文件夹放入项目的 `Assets` 目录中（建议放在 Editor 目录下或独立的工具目录）。
2. 在 Unity 菜单栏点击 `Tools > UIProbe` 打开窗口。
3. **设置**：首次使用建议先到设置页配置检测规则。
4. **索引**：在索引页点击"刷新"构建预制体索引。

## 🛠️ 配置说明

在设置页面可以配置：
- **检测模式**：Smart（智能过滤） / Strict（严格模式）
- **检测范围**：Global（全局） / SameLevel（同级）/ Children（子节点）
- **白名单/黑名单**：自定义允许或禁止重复的节点名称
